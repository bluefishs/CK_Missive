---
name: 規劃工作流程
description: 在撰寫程式碼前建立完整的實作計畫，包含需求分析、風險評估和分階段步驟
version: 1.0.0
category: shared
triggers:
  - /plan
  - 規劃
  - 建立計畫
  - 實作計畫
updated: 2026-02-03
author: everything-claude-code (adapted)
---

# 規劃工作流程

在撰寫任何程式碼前，先建立完整的實作計畫。

## 核心原則

**在使用者確認計畫前，絕不撰寫程式碼。**

## 規劃流程

### 1. 需求分析

- 完整理解功能需求
- 必要時提出澄清問題
- 識別成功標準
- 列出假設和限制

### 2. 架構審查

- 分析現有程式碼結構
- 識別受影響的元件
- 審查類似實作
- 考慮可重用的模式

### 3. 步驟分解

為每個步驟提供：

- 清晰、具體的動作
- 檔案路徑和位置
- 步驟之間的依賴關係
- 預估複雜度
- 潛在風險

### 4. 實作順序

- 依據依賴關係排定優先順序
- 將相關變更分組
- 最小化上下文切換
- 啟用增量測試

## 計畫格式範本

```markdown
# 實作計畫: [功能名稱]

## 概述

[2-3 句摘要]

## 需求

- [需求 1]
- [需求 2]

## 架構變更

- [變更 1: 檔案路徑和說明]
- [變更 2: 檔案路徑和說明]

## 實作步驟

### 階段 1: [階段名稱]

1. **[步驟名稱]** (檔案: path/to/file.ts)
   - 動作: 具體要執行的動作
   - 原因: 此步驟的理由
   - 依賴: 無 / 需要步驟 X
   - 風險: 低/中/高

### 階段 2: [階段名稱]

...

## 測試策略

- 單元測試: [要測試的檔案]
- 整合測試: [要測試的流程]
- E2E 測試: [要測試的使用者旅程]

## 風險與緩解

- **風險**: [說明]
  - 緩解: [如何處理]

## 成功標準

- [ ] 標準 1
- [ ] 標準 2
```

## 最佳實踐

1. **具體明確**: 使用確切的檔案路徑、函數名稱、變數名稱
2. **考慮邊界情況**: 思考錯誤情境、空值、空狀態
3. **最小化變更**: 優先擴展現有程式碼而非重寫
4. **維持模式**: 遵循現有專案慣例
5. **啟用測試**: 結構化變更以便於測試
6. **增量思考**: 每個步驟都應可驗證
7. **記錄決策**: 解釋為什麼，而非只是什麼

## 何時使用

- 開始新功能
- 進行重大架構變更
- 複雜的重構工作
- 多檔案/元件修改
- 模糊或不明確的需求

## 相關指令

- `/tdd` - 測試驅動開發實作
- `/code-review` - 程式碼審查
- `/build-fix` - 建構錯誤修復
