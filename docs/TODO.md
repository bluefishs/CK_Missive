# 待辦事項與未來功能規劃

> 此文件記錄系統待實作的功能與改進項目

---

## 高優先級

### 1. 附件備份機制
**建立日期**: 2026-01-07
**狀態**: 待實作

**需求描述**:
目前附件檔案透過 Docker bind mount 儲存於主機 `backend/uploads/` 目錄，需建立備份機制以確保資料安全。

**建議方案**:

| 方案 | 說明 | 複雜度 |
|------|------|--------|
| 方案 1 | 修改 docker-compose 掛載路徑至 NAS/外接硬碟 | 低 |
| 方案 2 | 設定 `ATTACHMENT_STORAGE_PATH` 環境變數 | 低 |
| 方案 3 | 建立 `/db-backup` Skill 自動備份 | 中 |

**方案 3 功能規格**:
- 手動執行 `/db-backup` 進行即時備份
- 支援指定目標路徑 (NAS / 外接硬碟 / 雲端)
- 增量備份 (只備份新增/修改的檔案)
- 保留策略 (自動清理舊備份，保留 N 天)
- 備份完成通知

**相關檔案**:
- `backend/app/api/endpoints/files.py` - 檔案上傳邏輯
- `docker-compose.dev.yml` - Volume 掛載設定
- `.claude/skills/db-backup.md` - 備份 Skill (待建立)

---

## 中優先級

*(待補充)*

---

## 低優先級

*(待補充)*

---

## 已完成

### 刪除公文同步刪除附件
**完成日期**: 2026-01-07

- [x] 刪除公文時同步刪除實體附件檔案
- [x] 自動清理空的公文資料夾 (`doc_{id}/`)
- [x] 資料庫 CASCADE 刪除附件記錄
